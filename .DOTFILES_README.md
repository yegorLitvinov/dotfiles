Itâ€™s the cleanest and most popular best practice for managing and *deploying* your configs across multiple systems (like different Macs).

Hereâ€™s a complete, battle-tested setup used by developers everywhere ðŸ‘‡

---

## ðŸ§­ Best Practice: **Bare Git Repo for Dotfiles**

### ðŸ§© Concept

* Your `$HOME` is the working tree.
* A **bare repository** lives in a hidden folder (e.g. `~/.dotfiles`).
* Only files you explicitly add are tracked.
* You can â€œdeployâ€ (check out) your configs on any machine with a single command.

---

## ðŸ› ï¸ Initial Setup (on your main machine)

```bash
# 1. Create a bare repo
git init --bare $HOME/.dotfiles

# 2. Define an alias for easy use
alias dotfiles='git --git-dir=$HOME/.dotfiles/ --work-tree=$HOME'

# 3. Make sure untracked files (like all of $HOME$) are hidden
dotfiles config --local status.showUntrackedFiles no

# 4. Add this alias permanently
echo "alias dotfiles='git --git-dir=$HOME/.dotfiles/ --work-tree=$HOME'" >> ~/.bashrc
# or ~/.zshrc depending on your shell
dotfiles() {
  /usr/bin/git --git-dir="$HOME/.dotfiles/" --work-tree="$HOME" "$@"
}
compdef _git dotfiles

# 5. Track your configs
dotfiles add ~/.bashrc
dotfiles add ~/.zshrc
dotfiles add ~/.config/nvim/init.lua
dotfiles add -u

# 6. Commit & push to a remote
dotfiles commit -m "Initial commit"
dotfiles remote add origin git@github.com:yourusername/dotfiles.git
dotfiles push -u origin main
```

---

## ðŸ’» Deploying on Another Mac

When you get a new machine, do this:

```bash
# 1. Clone it as a bare repo
git clone --bare git@github.com:yourusername/dotfiles.git $HOME/.dotfiles

# 2. Set up the alias again
alias dotfiles='git --git-dir=$HOME/.dotfiles/ --work-tree=$HOME'

# 3. Prevent showing all untracked files
dotfiles config --local status.showUntrackedFiles no

# 4. Try to check out your configs
dotfiles checkout
```

### ðŸ§© If checkout fails because some files already exist

Thatâ€™s normal (macOS creates default configs). Backup and retry:

```bash
mkdir -p ~/.dotfiles-backup
dotfiles checkout 2>&1 | egrep "\s+\." | awk {'print $1'} | \
  xargs -I{} mv {} ~/.dotfiles-backup/{}
dotfiles checkout
```

Then your dotfiles are in place.

---

## âš™ï¸ Optional: Auto-deploy Script

Hereâ€™s a **ready-to-use script** for new machines:

```bash
#!/usr/bin/env bash
git clone --bare git@github.com:yourusername/dotfiles.git $HOME/.dotfiles
function dotfiles {
   /usr/bin/git --git-dir=$HOME/.dotfiles/ --work-tree=$HOME "$@"
}
mkdir -p ~/.dotfiles-backup
dotfiles checkout 2>&1 | egrep "\s+\." | awk {'print $1'} | \
  xargs -I{} mv {} ~/.dotfiles-backup/{}
dotfiles checkout
dotfiles config status.showUntrackedFiles no
```

Save it as `install_dotfiles.sh`, make it executable (`chmod +x install_dotfiles.sh`), and run it on new machines.

---

## ðŸŒ± Why This Is the Best Practice

âœ… Keeps your home directory clean â€” no `.git` clutter
âœ… Easy deployment to any machine
âœ… Version control for all configs
âœ… No need for symlinks or weird directory layouts
âœ… Compatible with macOS, Linux, and WSL

---

## TODO: add next configs

- zshhistory (just some commands)

## Manuall setup

- Brew `/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"`
- Thunderbird - thkey extension
- Chrome - vimium extension
- Kawa (ctr+shift+1 english) 
- Install tmux plugin manager `git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm` (`prefix` + `I`) https://github.com/tmux-plugins/tpm


## Brew

All packages are specified in the `Brewfile` config.
Execute `brew bundle` to install packages from the config.

## Nix usage

```sh
nix-channel --add https://nixos.org/channels/nixos-unstable
nix-channel --update
export NIXPKGS_ALLOW_UNFREE=1
nix-env -iA vim
nix-channel --update && nix-env -u '*'  # upgrade all installed packages
nix-env -qaA nixpkgs.htop --description --meta  # show package info
```
